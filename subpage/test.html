<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jump 'n' Run Game</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; }
        canvas { display: block; margin: 0 auto; background: #87ceeb; }
    </style>
</head>
<body>
<canvas id="game" width="800" height="400"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const GRAVITY = 0.7;
const JUMP = -12;
const PLAYER = { x: 50, y: 300, w: 40, h: 40, vy: 0, onGround: false };
const PLATFORMS = [
    { x: 0, y: 350, w: 800, h: 50 },
    { x: 200, y: 280, w: 120, h: 20 },
    { x: 400, y: 220, w: 120, h: 20 },
    { x: 600, y: 160, w: 120, h: 20 }
];
let keys = {};

document.addEventListener('keydown', e => keys[e.code] = true);
document.addEventListener('keyup', e => keys[e.code] = false);

function rectsCollide(a, b) {
    return a.x < b.x + b.w && a.x + a.w > b.x &&
                 a.y < b.y + b.h && a.y + a.h > b.y;
}

function updatePlayer() {
    // Horizontal movement
    if (keys['ArrowRight'] || keys['KeyD']) PLAYER.x += 5;
    if (keys['ArrowLeft'] || keys['KeyA']) PLAYER.x -= 5;

    // Jump
    if ((keys['ArrowUp'] || keys['Space'] || keys['KeyW']) && PLAYER.onGround) {
        PLAYER.vy = JUMP;
        PLAYER.onGround = false;
    }

    // Gravity
    PLAYER.vy += GRAVITY;
    PLAYER.y += PLAYER.vy;

    // Platform collision
    PLAYER.onGround = false;
    for (const plat of PLATFORMS) {
        const nextPlayer = { ...PLAYER, y: PLAYER.y + 1 };
        if (rectsCollide(nextPlayer, plat) && PLAYER.vy >= 0) {
            PLAYER.y = plat.y - PLAYER.h;
            PLAYER.vy = 0;
            PLAYER.onGround = true;
        }
    }

    // Boundaries
    if (PLAYER.x < 0) PLAYER.x = 0;
    if (PLAYER.x + PLAYER.w > canvas.width) PLAYER.x = canvas.width - PLAYER.w;
    if (PLAYER.y + PLAYER.h > canvas.height) {
        PLAYER.y = canvas.height - PLAYER.h;
        PLAYER.vy = 0;
        PLAYER.onGround = true;
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw platforms
    ctx.fillStyle = '#654321';
    for (const plat of PLATFORMS) {
        ctx.fillRect(plat.x, plat.y, plat.w, plat.h);
    }

    // Draw player
    ctx.fillStyle = '#ff0';
    ctx.fillRect(PLAYER.x, PLAYER.y, PLAYER.w, PLAYER.h);
}

function loop() {
    updatePlayer();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>